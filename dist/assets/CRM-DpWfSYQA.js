import{b as p,j as e}from"./vendor-query-CfuGqJst.js";import{r as x}from"./vendor-react-Ba_DDsk4.js";import{d as h}from"./index-uMaUSKow.js";import{V as u}from"./ViewBar-GmxfLOF8.js";const j={all:["contacts"]};async function N(){return h.contacts.orderBy("name").toArray()}function f(){return p({queryKey:j.all,queryFn:N,staleTime:6e4})}const c=["Lead","Active","Dormant","Archived"];function b(){const[n,d]=x.useState("Lead"),{data:a=[],isLoading:o}=f(),r=x.useMemo(()=>{var i;const s=c.map(l=>({stage:l,count:a.filter(m=>m.status===l).length})),t=(i=a.filter(l=>l.nextStep))==null?void 0:i.slice(0,5);return{stageCount:s,upcoming:t}},[a]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("header",{className:"space-y-2",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"CRM Relacional"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Gestiona tus relaciones clave: leads, aliados y clientes con próximo paso claro."})]}),e.jsx("section",{className:"grid gap-3 md:grid-cols-4",children:r.stageCount.map(s=>e.jsxs("article",{className:"card p-4",children:[e.jsx("span",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:s.stage}),e.jsx("p",{className:"text-2xl font-semibold mt-2",children:s.count})]},s.stage))}),e.jsx(u,{items:c.map(s=>({key:s.toLowerCase(),label:s})),active:n.toLowerCase(),onChange:s=>d(s.toUpperCase()),actions:e.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Próximamente: pipeline drag & drop"})}),o?e.jsx("div",{className:"card p-4 text-sm text-slate-500 dark:text-slate-400",children:"Cargando contactos..."}):e.jsx("div",{className:"grid gap-4 md:grid-cols-4",children:c.map(s=>e.jsxs("section",{className:`card p-4 space-y-3 ${s===n?"ring-2 ring-brand":""}`,children:[e.jsx("h2",{className:"text-sm font-semibold",children:s}),e.jsxs("div",{className:"space-y-3",children:[a.filter(t=>t.status===s).map(t=>e.jsxs("article",{className:"border border-slate-200 dark:border-slate-800 rounded-xl p-3 text-sm",children:[e.jsx("div",{className:"font-medium",children:t.name}),e.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[t.company??"—"," · ",t.role??"—"]}),e.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:["Último contacto: ",t.lastContact??"—"]}),e.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Próximo paso: ",t.nextStep??"—"]})]},t.id)),!a.filter(t=>t.status===s).length&&e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500",children:"Sin registros"})]})]},s))}),e.jsxs("section",{className:"card p-4 space-y-3",children:[e.jsx("h2",{className:"text-sm font-semibold",children:"Próximos follow-ups"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[r.upcoming.map(s=>e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{children:s.name}),e.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:s.nextStep??"—"})]},s.id)),!r.upcoming.length&&e.jsx("li",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Define próximos pasos para mantener el momentum."})]})]})]})}export{b as default};
