import{j as e}from"./vendor-query-CfuGqJst.js";import{r as n}from"./vendor-react-Ba_DDsk4.js";import{u as N}from"./tasks-t6ey88ep.js";import{u as b}from"./projects-D-qCoM0Y.js";import{a as y}from"./date-CZKpIZnz.js";import{R as o,P as v,a as k,C as D,T as m,A as w,X as u,Y as p,b as C,L as T,c as S,d as P}from"./vendor-charts-Ci5G67-A.js";import"./index-uMaUSKow.js";import"./parseISO-Clwiv-83.js";const j=["To Do","In Progress","Review","Done"],h=["#0ea5e9","#22c55e","#f59e0b","#6366f1","#ef4444","#14b8a6"];function A(s){return j.map((a,l)=>({name:a,value:s.filter(r=>r.status===a).length,color:h[l%h.length]}))}function M(s){return j.map(a=>({status:a,value:s.filter(l=>l.status===a).length}))}function R(s){const l=s.filter(r=>r.status!=="Done").length;return Array.from({length:7}).map((r,i)=>{const c=y(new Date().toISOString().slice(0,10),i),d=Math.max(l-i*Math.ceil(l/7),0);return{day:c,remaining:d}})}function K(s){return s.filter(a=>a.dueDate&&a.status!=="Done").sort((a,l)=>(a.dueDate??"").localeCompare(l.dueDate??"")).slice(0,5)}function Q(){const{data:s=[],isLoading:a}=N(),{data:l=[],isLoading:r}=b(),i=n.useMemo(()=>A(s),[s]),c=n.useMemo(()=>M(s),[s]),d=n.useMemo(()=>R(s),[s]),x=n.useMemo(()=>K(s),[s]),f=s.filter(t=>t.status==="Done").length,g=s.filter(t=>t.status==="In Progress").length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{className:"space-y-1",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Estado del portafolio"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Visualiza cómo avanza el trabajo y dónde actuar para desbloquear al equipo."})]}),e.jsxs("section",{className:"grid gap-3 md:grid-cols-4",children:[e.jsxs("article",{className:"card p-4",children:[e.jsx("header",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Tareas totales"}),e.jsx("p",{className:"text-2xl font-semibold mt-2",children:a?"—":s.length})]}),e.jsxs("article",{className:"card p-4",children:[e.jsx("header",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Completadas"}),e.jsx("p",{className:"text-2xl font-semibold mt-2 text-emerald-500",children:a?"—":f})]}),e.jsxs("article",{className:"card p-4",children:[e.jsx("header",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"En progreso"}),e.jsx("p",{className:"text-2xl font-semibold mt-2",children:a?"—":g})]}),e.jsxs("article",{className:"card p-4",children:[e.jsx("header",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Proyectos activos"}),e.jsx("p",{className:"text-2xl font-semibold mt-2",children:r?"—":l.filter(t=>t.status==="Active").length})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"card p-4",children:[e.jsx("header",{className:"font-medium mb-2",children:"Distribución por estado"}),e.jsx("div",{className:"h-64",children:e.jsx(o,{children:e.jsxs(v,{children:[e.jsx(k,{dataKey:"value",data:i,nameKey:"name",label:!0,children:i.map(t=>e.jsx(D,{fill:t.color},t.name))}),e.jsx(m,{})]})})})]}),e.jsxs("div",{className:"card p-4",children:[e.jsx("header",{className:"font-medium mb-2",children:"Flujo acumulado"}),e.jsx("div",{className:"h-64",children:e.jsx(o,{children:e.jsxs(w,{data:c,children:[e.jsx(u,{dataKey:"status"}),e.jsx(p,{allowDecimals:!1}),e.jsx(m,{}),e.jsx(C,{dataKey:"value",stroke:"#6366f1",fill:"#6366f1",fillOpacity:.25})]})})})]}),e.jsxs("div",{className:"card p-4 md:col-span-2",children:[e.jsx("header",{className:"font-medium mb-2",children:"Burn-down 7 días"}),e.jsx("div",{className:"h-64",children:e.jsx(o,{children:e.jsxs(T,{data:d,children:[e.jsx(S,{strokeDasharray:"3 3",strokeOpacity:.2}),e.jsx(u,{dataKey:"day"}),e.jsx(p,{allowDecimals:!1}),e.jsx(m,{}),e.jsx(P,{dataKey:"remaining",stroke:"#ef4444",strokeWidth:2})]})})})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"card p-4",children:[e.jsx("header",{className:"font-medium mb-2",children:"Próximas entregas"}),e.jsxs("ul",{className:"space-y-3 text-sm",children:[x.map(t=>e.jsxs("li",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.title}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:t.assignee??"Sin responsable"})]}),e.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-100 dark:bg-slate-800 px-3 py-1 text-xs",children:t.dueDate})]},t.id)),!x.length&&e.jsx("li",{className:"text-sm opacity-70",children:"No hay tareas próximas."})]})]}),e.jsxs("div",{className:"card p-4",children:[e.jsx("header",{className:"font-medium mb-2",children:"Contexto del portafolio"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 leading-relaxed",children:"Monitorea la salud de los proyectos con indicadores en tiempo real, prioriza riesgos y asegúrate de que la capacidad del equipo se alinee con la demanda. Importa tus CSV actualizados para mantener la base sin conexión y sincronizar cambios con el backend cuando vuelvas a estar en línea."})]})]})]})}export{Q as default};
