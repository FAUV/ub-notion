import{j as e}from"./vendor-query-CfuGqJst.js";import{r as n}from"./vendor-react-Ba_DDsk4.js";import{u as m}from"./calendarEvents-BGl9AXxe.js";import{u as o}from"./tasks-t6ey88ep.js";import{R as x,A as h,X as p,Y as f,T as j,b as u}from"./vendor-charts-Ci5G67-A.js";import{f as i}from"./index-uMaUSKow.js";import{p as c}from"./parseISO-Clwiv-83.js";function C(){const{data:r=[]}=m(),{data:l=[]}=o(),d=n.useMemo(()=>{const s=new Map;return r.forEach(a=>{const t=a.date;s.set(t,(s.get(t)??0)+1)}),l.filter(a=>a.dueDate).forEach(a=>{const t=a.dueDate;s.set(t,(s.get(t)??0)+1)}),Array.from(s.entries()).sort(([a],[t])=>a>t?1:-1).map(([a,t])=>({date:a,count:t}))},[r,l]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("header",{className:"space-y-2",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Ultimate Calendar"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Integra eventos clave, focos de trabajo y entregas para visualizar tu carga real."})]}),e.jsxs("section",{className:"card p-4",children:[e.jsx("h2",{className:"text-sm font-semibold mb-3",children:"Cadencia de eventos + entregas"}),e.jsx("div",{className:"h-64",children:e.jsx(x,{width:"100%",height:"100%",children:e.jsxs(h,{data:d,children:[e.jsx(p,{dataKey:"date",tickFormatter:s=>i(c(s),"dd/MM"),minTickGap:32}),e.jsx(f,{allowDecimals:!1}),e.jsx(j,{labelFormatter:s=>i(c(String(s)),"PPP")}),e.jsx(u,{dataKey:"count",stroke:"#6366f1",fill:"#6366f1",fillOpacity:.2})]})})})]}),e.jsxs("section",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("article",{className:"card p-4",children:[e.jsx("h2",{className:"text-sm font-semibold mb-3",children:"Eventos próximos"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[r.slice(0,10).map(s=>e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{children:s.title}),e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:[i(c(s.date),"dd MMM")," · ",s.category]})]},s.id)),!r.length&&e.jsx("li",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No hay eventos registrados."})]})]}),e.jsxs("article",{className:"card p-4",children:[e.jsx("h2",{className:"text-sm font-semibold mb-3",children:"Entregas planificadas"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[l.filter(s=>s.dueDate).sort((s,a)=>(s.dueDate??"").localeCompare(a.dueDate??"")).slice(0,10).map(s=>e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{children:s.title}),e.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:s.dueDate})]},s.id)),!l.filter(s=>s.dueDate).length&&e.jsx("li",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Define fechas para tus tareas clave."})]})]})]})]})}export{C as default};
