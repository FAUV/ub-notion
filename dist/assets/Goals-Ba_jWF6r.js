import{j as s}from"./vendor-query-CfuGqJst.js";import{r as m}from"./vendor-react-Ba_DDsk4.js";import{V as j}from"./ViewBar-GmxfLOF8.js";import{u}from"./goals-qM0qUXOX.js";import{u as N}from"./areas-CuyiulQt.js";import"./index-uMaUSKow.js";function w(){const[i,x]=m.useState("dashboard"),{data:t=[],isLoading:o}=u(),{data:p=[]}=N(),c=m.useMemo(()=>{const e=t.reduce((a,r)=>(a[r.status]=(a[r.status]??0)+1,a),{}),l=t.filter(a=>(a.progress??0)<80).slice(0,3),d=t.reduce((a,r)=>a+(r.impact??0)*(r.progress??0),0),n=t.length,h=n?Math.round(d/n/5):0;return{byStatus:e,focusGoals:l,weighted:h}},[t]);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold",children:"Objetivos & OKRs"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Revisa el avance de tus objetivos estratégicos y las conexiones con áreas clave."})]}),s.jsx(j,{items:[{key:"dashboard",label:"Panel"},{key:"table",label:"Lista"}],active:i,onChange:e=>x(e)}),o?s.jsx("div",{className:"card p-4 text-sm text-slate-500 dark:text-slate-400",children:"Cargando objetivos..."}):i==="dashboard"?s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs("article",{className:"card p-4 space-y-2",children:[s.jsx("h2",{className:"text-sm font-semibold",children:"Estado general"}),s.jsx("ul",{className:"space-y-2 text-sm",children:Object.entries(c.byStatus).map(([e,l])=>s.jsxs("li",{className:"flex justify-between",children:[s.jsx("span",{children:e}),s.jsx("span",{className:"font-medium",children:l})]},e))})]}),s.jsxs("article",{className:"card p-4 space-y-2",children:[s.jsx("h2",{className:"text-sm font-semibold",children:"Objetivos foco"}),s.jsxs("ul",{className:"space-y-2 text-sm",children:[c.focusGoals.map(e=>s.jsxs("li",{children:[s.jsx("p",{className:"font-medium",children:e.title}),s.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Progreso ",e.progress??0,"% · Impacto ",e.impact??"—"]})]},e.id)),!c.focusGoals.length&&s.jsx("li",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Todos los objetivos están encaminados."})]})]}),s.jsxs("article",{className:"card p-4 space-y-2",children:[s.jsx("h2",{className:"text-sm font-semibold",children:"Momentum estratégico"}),s.jsxs("p",{className:"text-4xl font-semibold",children:[c.weighted,"%"]}),s.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Promedio ponderado (impacto x progreso / 5)."})]})]}):s.jsx("div",{className:"card p-0 overflow-x-auto",children:s.jsxs("table",{className:"min-w-full text-sm",children:[s.jsx("thead",{className:"text-left text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400 border-b border-slate-200 dark:border-slate-800",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 font-medium",children:"Objetivo"}),s.jsx("th",{className:"px-4 py-3 font-medium",children:"Área"}),s.jsx("th",{className:"px-4 py-3 font-medium",children:"Horizon"}),s.jsx("th",{className:"px-4 py-3 font-medium",children:"Impacto"}),s.jsx("th",{className:"px-4 py-3 font-medium",children:"Confianza"}),s.jsx("th",{className:"px-4 py-3 font-medium",children:"Progreso"}),s.jsx("th",{className:"px-4 py-3 font-medium",children:"Entrega"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-800",children:[t.map(e=>{var l;return s.jsxs("tr",{children:[s.jsxs("td",{className:"px-4 py-3",children:[s.jsx("div",{className:"font-medium",children:e.title}),s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:e.status})]}),s.jsx("td",{className:"px-4 py-3",children:((l=p.find(d=>d.id===e.areaId))==null?void 0:l.name)??"—"}),s.jsx("td",{className:"px-4 py-3",children:e.horizon??"—"}),s.jsx("td",{className:"px-4 py-3",children:e.impact??"—"}),s.jsx("td",{className:"px-4 py-3",children:e.confidence??"—"}),s.jsxs("td",{className:"px-4 py-3",children:[e.progress??0,"%"]}),s.jsx("td",{className:"px-4 py-3",children:e.dueDate??"—"})]},e.id)}),!t.length&&s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"px-4 py-6 text-center text-sm text-slate-500 dark:text-slate-400",children:"No hay objetivos definidos."})})]})]})})]})}export{w as default};
