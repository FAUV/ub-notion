import{b as p,u,j as e}from"./vendor-query-CfuGqJst.js";import{r as x}from"./vendor-react-Ba_DDsk4.js";import{i as j}from"./importCsv-Dai6I4rs.js";import{V as N}from"./ViewBar-GmxfLOF8.js";import{d as y}from"./index-uMaUSKow.js";const o={all:["content"]};async function f(){return y.content.orderBy("title").toArray()}function g(){return p({queryKey:o.all,queryFn:f,staleTime:6e4})}function b({items:a}){return a!=null&&a.length?e.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:a.map(s=>e.jsxs("article",{className:"card p-4 space-y-3",children:[e.jsxs("header",{children:[e.jsx("h3",{className:"font-semibold text-base leading-tight",children:s.title}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:s.kind})]}),e.jsxs("dl",{className:"text-sm text-slate-600 dark:text-slate-300 space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"font-medium",children:"Estado"}),e.jsx("dd",{children:s.status})]}),s.owner&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"font-medium",children:"Responsable"}),e.jsx("dd",{children:s.owner})]}),s.dueDate&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"font-medium",children:"Entrega"}),e.jsx("dd",{children:s.dueDate})]})]}),s.url&&e.jsx("a",{href:s.url,target:"_blank",rel:"noreferrer",className:"text-sm text-brand font-medium hover:underline",children:"Abrir recurso"})]},s.id))}):e.jsx("div",{className:"card p-4 text-sm opacity-80",children:"No hay contenidos registrados."})}function q(){const[a,s]=x.useState("gallery"),m=u(),{data:l=[],isLoading:i}=g(),c=x.useMemo(()=>{const t=l.length,n=l.filter(r=>r.status==="Publicado").length,d=l.filter(r=>r.status==="Revisión").length;return{total:t,published:n,review:d}},[l]);async function h(t){var r;const n=(r=t.target.files)==null?void 0:r[0];if(!n)return;const d=await n.text();await j("content",d),await m.invalidateQueries({queryKey:o.all})}return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Contenido"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("label",{className:"btn cursor-pointer",children:["Importar CSV",e.jsx("input",{type:"file",accept:".csv",className:"hidden",onChange:h})]})})]}),e.jsxs("section",{className:"grid gap-3 md:grid-cols-3",children:[e.jsxs("article",{className:"card p-4",children:[e.jsx("header",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Total activos"}),e.jsx("p",{className:"text-2xl font-semibold mt-2",children:c.total})]}),e.jsxs("article",{className:"card p-4",children:[e.jsx("header",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"En revisión"}),e.jsx("p",{className:"text-2xl font-semibold mt-2",children:c.review})]}),e.jsxs("article",{className:"card p-4",children:[e.jsx("header",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Publicados"}),e.jsx("p",{className:"text-2xl font-semibold mt-2 text-emerald-500",children:c.published})]})]}),e.jsx(N,{items:[{key:"gallery",label:"Galería"},{key:"list",label:"Lista"}],active:a,onChange:s}),i&&e.jsx("div",{className:"card p-4 text-sm opacity-80",children:"Cargando contenidos..."}),a==="gallery"&&e.jsx(b,{items:l}),a==="list"&&e.jsx("div",{className:"card p-0 overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"text-left text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400 border-b border-slate-200 dark:border-slate-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-medium",children:"Título"}),e.jsx("th",{className:"px-4 py-3 font-medium",children:"Tipo"}),e.jsx("th",{className:"px-4 py-3 font-medium",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 font-medium",children:"Proyecto"}),e.jsx("th",{className:"px-4 py-3 font-medium",children:"Responsable"}),e.jsx("th",{className:"px-4 py-3 font-medium",children:"Entrega"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-800",children:[l.map(t=>e.jsxs("tr",{className:"hover:bg-slate-50/60 dark:hover:bg-slate-800/60",children:[e.jsx("td",{className:"px-4 py-3",children:t.title}),e.jsx("td",{className:"px-4 py-3",children:t.kind}),e.jsx("td",{className:"px-4 py-3",children:t.status}),e.jsx("td",{className:"px-4 py-3",children:t.projectId??"—"}),e.jsx("td",{className:"px-4 py-3",children:t.owner??"—"}),e.jsx("td",{className:"px-4 py-3",children:t.dueDate??"—"})]},t.id)),!l.length&&!i&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-6 text-center text-sm opacity-70",children:"No hay contenidos registrados."})})]})]})})]})}export{q as default};
